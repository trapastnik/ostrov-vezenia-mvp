# üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∑–∞–¥–∞—á–∏

_–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2026-02-19_

---

## 1. API –ü–æ—á—Ç—ã –†–æ—Å—Å–∏–∏ ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°—Ç–∞—Ç—É—Å:** üî¥ –ù–µ —Ä–µ—à–µ–Ω–æ
**–°–∏–º–ø—Ç–æ–º:** `API_USER_NOT_FOUND` / `ILLEGAL_CREDENTIALS` –Ω–∞ –≤—Å–µ—Ö –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—É–±–ª–∏—á–Ω—ã–π —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ç–æ—Ä (`tariff.pochta.ru/v2`) ‚Äî –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚úÖ

**–ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞ (`/clean/address`)
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –§–ò–û (`/clean/physical`)
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (`/clean/phone`)
- –ë–∞–ª–∞–Ω—Å (`/counterpart/balance`)
- –¢–æ—á–∫–∏ —Å–¥–∞—á–∏ (`/user-shipping-points`)
- –î–æ–≥–æ–≤–æ—Ä–Ω–æ–π —Ç–∞—Ä–∏—Ñ (`/tariff`)

**–¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ:**
- –¢–æ–∫–µ–Ω: `NgZGBuTy7rqKH_aifQX8DUNSoQrHjKON` ‚úÖ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω –≤ –∫–∞–±–∏–Ω–µ—Ç–µ otpravka.pochta.ru, 9/1000 –∑–∞–ø—Ä–æ—Å–æ–≤)
- –õ–æ–≥–∏–Ω: `info@ostrov-log.ru` ‚ùì (–≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ–≤–µ—Ä–Ω—ã–π ‚Äî –¥–ª—è API –ª–æ–≥–∏–Ω –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç email)
- –ü–∞—Ä–æ–ª—å: `Ostrov!2026` ‚ùì

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –ó–∞–π—Ç–∏ –Ω–∞ otpravka.pochta.ru ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí API
2. –ù–∞–∂–∞—Ç—å ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ e-mail¬ª
3. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ—á–Ω—ã–π –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è API
4. –û–±–Ω–æ–≤–∏—Ç—å `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: `POCHTA_LOGIN` –∏ `POCHTA_PASSWORD`
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend: `docker compose -f docker-compose.prod.yml restart backend celery_worker`

---

## 2. –¢–µ—Å—Ç–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π —Ç–∞—Ä–∏—Ñ –≤–º–µ—Å—Ç–æ –¥–æ–≥–æ–≤–æ—Ä–Ω–æ–≥–æ

**–°—Ç–∞—Ç—É—Å:** üü° –¢—Ä–µ–±—É–µ—Ç —Ä–µ—à–µ–Ω–∏—è –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã ‚Ññ1
**–§–∞–π–ª:** `backend/app/services/delivery.py`
**–°—Ç—Ä–æ–∫–∞:** `tariff = await self._pochta.calculate_tariff_public(...)`

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü–æ–∫—É–ø–∞—Ç–µ–ª—é –≤ –≤–∏–¥–∂–µ—Ç–µ –º–∞–≥–∞–∑–∏–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **—Ä–æ–∑–Ω–∏—á–Ω–∞—è —Ü–µ–Ω–∞** (–ø—É–±–ª–∏—á–Ω—ã–π —Ç–∞—Ä–∏—Ñ), –∞ –Ω–µ —Ü–µ–Ω–∞ –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É —Å –ü–æ—á—Ç–æ–π –†–æ—Å—Å–∏–∏. –†–∞–∑–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π.

**–†–µ—à–µ–Ω–∏–µ:**
–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ `calculate_tariff_contract(...)` ‚Äî –Ω–æ —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É ‚Ññ1 (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è API).

---

## 3. Gradio –ø—Ä–æ–µ–∫—Ç ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–°—Ç–∞—Ç—É—Å:** üü¢ –ù–µ–∫—Ä–∏—Ç–∏—á–Ω–æ
**–§–∞–π–ª:** `~/Desktop/WWWWW/POST/pochta_gradio.py` (–ª–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç)
**–û—à–∏–±–∫–∞:**
```
UserWarning: The parameters have been moved from the Blocks constructor
to the launch() method in Gradio 6.0: theme
```

**–†–µ—à–µ–Ω–∏–µ:**
–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä `theme` –∏–∑ `gr.Blocks(theme=...)` –≤ `demo.launch(theme=...)`.

---

## 4. –ù–µ—Ä–µ—à—ë–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ —Å–µ—Ä–≤–µ—Ä—É

**–°—Ç–∞—Ç—É—Å:** üü° –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ

- [ ] –î–æ–±–∞–≤–∏—Ç—å Swap (2-4 GB) ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç OOM –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ RAM
- [ ] –£–∂–µ—Å—Ç–æ—á–∏—Ç—å Fail2ban (–±–∞–Ω–∏—Ç—å –ø–æ—Å–ª–µ 3 –ø–æ–ø—ã—Ç–æ–∫ –≤–º–µ—Å—Ç–æ 10)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–∞ (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ >80%)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–±—ç–∫–∞–ø PostgreSQL

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| –°–µ—Ä–≤–µ—Ä | `212.113.117.186` |
| SSH | `ssh root@212.113.117.186` (—Ç–æ–ª—å–∫–æ –ø–æ –∫–ª—é—á—É) |
| –ü—Ä–æ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ | `/opt/ostrov-vezeniya/` |
| API –¥–æ–º–µ–Ω | `https://api.ostrov-vezeniya.ru` |
| –ê–¥–º–∏–Ω–∫–∞ | `https://admin.ostrov-vezeniya.ru` |
| SSL | Let's Encrypt, –¥–æ 19 –º–∞—è 2026 ‚úÖ |
| –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ | `systemd: ostrov-vezeniya.service` ‚úÖ |
| –°—Ç–µ–∫ | FastAPI + Celery + Postgres + Redis + Nginx (Docker Compose) |
